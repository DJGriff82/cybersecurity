<h1>Manage Users</h1>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Email</th>
      <th>Role</th>
      <th>Company</th>
      <th>Status</th>
      <th>Actions</th>
    </tr>
  </thead>

  <tbody>
    <% @users.each do |user| %>
      <tr>
        <td><%= "#{user.first_name} #{user.last_name}" %></td>
        <td><%= user.email %></td>
        <td><%= user.role.humanize %></td>
        <td><%= user.company&.name || "—" %></td>
        <td>
          <%= user.deleted_at.present? ? "Disabled" : "Active" %>
        </td>
        <td>
          <!-- ✅ Action links go here -->
          <%= link_to "View", super_user_path(user) %> |
          <%= link_to "Edit", edit_super_user_path(user) %> |

          <% if user.deleted_at.present? %>
            <%= link_to "Enable", toggle_active_super_user_path(user),
                        method: :patch,
                        data: { confirm: "Re-enable this user?" } %>
          <% else %>
            <%= link_to "Disable", toggle_active_super_user_path(user),
                        method: :patch,
                        data: { confirm: "Are you sure you want to disable this user?" } %>
          <% end %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
