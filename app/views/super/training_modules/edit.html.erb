<h1 class="text-2xl font-bold mb-4">Edit Training Module</h1>

<%= form_with(model: [:super, @course, @training_module], local: true) do |form| %>
  <div class="mb-4">
    <%= form.label :title, "Module Title", class: "block font-bold mb-1" %>
    <%= form.text_field :title, class: "w-full border rounded px-2 py-1", required: true %>
  </div>

  <div class="mb-4">
    <%= form.label :content, "Module Description", class: "block font-bold mb-1" %>
    <%= form.text_area :content, rows: 4, class: "w-full border rounded px-2 py-1" %>
  </div>

  <div class="mb-4">
    <%= form.label :position, "Position", class: "block font-bold mb-1" %>
    <%= form.number_field :position, class: "w-full border rounded px-2 py-1", required: true %>
  </div>

  <%= form.submit "Save Module",
      class: "bg-green-600 text-white px-4 py-2 rounded" %>
<% end %>

<hr class="my-8">

<h2 class="text-xl font-bold mb-4">Pages in this Module</h2>

<div class="mb-4">
  <%= link_to "âž• Add Page",
              new_super_course_training_module_module_page_path(@course, @training_module),
              class: "bg-blue-600 text-white px-4 py-2 rounded" %>
</div>

<% if @training_module.module_pages.any? %>
  <ul class="space-y-4">
    <% @training_module.module_pages.each do |page| %>
      <li class="border rounded p-4">
        <div class="flex justify-between items-center">
          <div>
            <h3 class="font-bold"><%= page.title %></h3>
            <p class="text-gray-600 text-sm">Order: <%= page.position %></p>
          </div>
          <div class="space-x-2">
            <%= link_to "Edit",
                        edit_super_course_training_module_module_page_path(@course, @training_module, page),
                        class: "bg-yellow-500 text-white px-3 py-1 rounded" %>
            <%= link_to "Delete",
                        super_course_training_module_module_page_path(@course, @training_module, page),
                        method: :delete,
                        data: { confirm: "Are you sure?" },
                        class: "bg-red-600 text-white px-3 py-1 rounded" %>
          </div>
        </div>
        <div class="mt-2 text-gray-800">
          <%= truncate(page.content, length: 150) %>
        </div>
      </li>
    <% end %>
  </ul>
<% else %>
  <p class="text-gray-600">No pages have been added yet.</p>
<% end %>
